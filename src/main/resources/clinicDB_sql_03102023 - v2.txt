/*
PostgresSQL 15
USER = "postgres"
PASSWORD = "1212"
SCRIPT = Version 2.0
DATE = 01/10/2013
*/

-- Database: clinicDB

-- DROP DATABASE IF EXISTS "clinicDB";

CREATE DATABASE "clinicDB"
    WITH
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'Spanish_Colombia.1252'
    LC_CTYPE = 'Spanish_Colombia.1252'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1
    IS_TEMPLATE = False;

CREATE TABLE IF NOT EXISTS public.PERSONTYPE
(
	IDPERSONTYPE serial, 
	PTYPDESCRIPTION varchar(15) NOT NULL,
      CONSTRAINT persontype_pkey PRIMARY KEY (IDPERSONTYPE)
);

CREATE TABLE IF NOT EXISTS public.PERSON
(
	IDPERSON serial,
	PERIDENTIFICATIONNUMBER varchar(10) NOT NULL,
	PERFIRSTNAME 		varchar(20) NOT NULL,
	PERSECONDNAME 		varchar(20) NOT NULL,
	PERFISTLASTNAME 		varchar(20) NOT NULL,
	PERSECONDLASTNAME 	varchar(20) NOT NULL,
	PERPHONENUMBER		varchar(20) NOT NULL,
	PERPERSONTYPEENUM		integer NOT NULL,
   	CONSTRAINT person_pkey PRIMARY KEY (IDPERSON),
	CONSTRAINT fk_personType
		FOREIGN KEY (PERPERSONTYPEENUM) 
	  	REFERENCES PERSONTYPE(IDPERSONTYPE) 
	 	ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS public.AGENDA
(
	IDAGENDA serial, 
	AGEIDDOCTOR integer NOT NULL,
	AGEDATE date NOT NULL,
	AGEHOUR date NOT NULL,
	AGESTATUS boolean NOT NULL,
      CONSTRAINT agenda_pkey PRIMARY KEY (IDAGENDA),
	CONSTRAINT fk_person
		FOREIGN KEY (AGEIDDOCTOR) 
	  	REFERENCES PERSON(IDPERSON) 
	 	ON DELETE CASCADE
);



